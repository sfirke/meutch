<!-- app/templates/circles/view_circle.html -->

{% extends "base.html" %}

{% block title %}{{ circle.name }}{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>{{ circle.name }}</h2>
    <p>{{ circle.description }}</p>
    <p><strong>Members:</strong> {{ circle.members|length }}</p>
    <p><strong>Requires Approval:</strong> {{ 'Yes' if circle.requires_approval else 'No' }}</p>
    
    {% if is_member %}
        <form action="{{ url_for('circles.leave_circle', circle_id=circle.id) }}" method="post">
            {{ form.csrf_token }}
            <button type="submit" class="btn btn-danger">Leave Circle</button>
        </form>
    {% else %}
        <form action="{{ url_for('circles.join_circle', circle_id=circle.id) }}" method="post">
            {{ form.csrf_token }}
            <button type="submit" class="btn btn-primary">Join Circle</button>
        </form>
    {% endif %}
</div>
{% endblock %}